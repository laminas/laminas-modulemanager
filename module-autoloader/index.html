<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Modular application system for laminas-mvc applications">  
    <link rel="canonical" href="https://docs.laminas.dev/laminas-modulemanager/module-autoloader/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>The Module Autoloader - laminas-modulemanager - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="mvc" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown sub-project-selector">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a href="https://docs.mezzio.dev/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mezzio-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Mezzio</strong><br>
                                        PSR-15 Middleware in Minutes
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/components/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-components-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Components</strong><br>
                                        Components for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/mvc" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mvc-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>MVC</strong><br>
                                        MVC for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://api-tools.getlaminas.org/documentation" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-api-tools-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>API Tools</strong><br>
                                        Build RESTful APIs in Minutes
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/migration/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Migration to Laminas
                                    </div>
                                </div>
                            </a>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/tutorials/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Tutorials
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-modulemanager</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../module-manager/" class="subnavigation__link">The Module Manager</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../module-class/" class="subnavigation__link">The Module Class</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">The Module Autoloader</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../best-practices/" class="subnavigation__link">Best Practices when Creating Modules</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    MVC

                    
                        <small class="header__subtitle">laminas-modulemanager</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-modulemanager/" class="header__link header__link--github" title="Go to repository of laminas-modulemanager">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#module-autoloader-usage" class="toc__link nav-link">Module Autoloader Usage</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#non-standard-explicit-module-paths" class="toc__link nav-link">Non-Standard / Explicit Module Paths</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#packaging-modules-with-phar" class="toc__link nav-link">Packaging Modules with Phar</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/mvc/">MVC</a></li>

            
                <li class="breadcrumb-item"><a href="..">laminas-modulemanager</a></li>

                
                    
                        
                        
                            <li class="breadcrumb-item">Reference</li>
                        
                    
                

                <li class="breadcrumb-item active" aria-current="page">The Module Autoloader</li>
            
        
    </ol>
</nav>






    
    
        <h2 class="chapter__headline">Reference</h2>
    

    <h1 id="the-module-autoloader">The Module Autoloader</h1>
<p>laminas-modulemanager ships with the default module autoloader
<code>Laminas\Loader\ModuleAutoloader</code>. It is a specialized autoloader responsible for
locating and on-demand loading of, the <code>Module</code> classes from a variety of
sources.</p>
<h2 id="module-autoloader-usage">Module Autoloader Usage</h2>
<p>By default, the provided <code>Laminas\ModuleManager\Listener\DefaultListenerAggregate</code>
sets up the <code>ModuleAutoloader</code>; as a developer, you need only provide an array
of module paths, either absolute or relative to the application's root, for the
<code>ModuleAutoloader</code> to check when loading modules. The <code>DefaultListenerAggregate</code>
will take care of instantiating and registering the <code>ModuleAutoloader</code> for you.</p>
<blockquote>
<h3 id="must-be-in-application-root">Must be in application root</h3>
<p>In order for paths relative to your application directory to work, you must
have the directive <code>chdir(dirname(__DIR__));</code> in your <code>public/index.php</code> file.</p>
</blockquote>
<h3 id="registering-module-paths-with-the-defaultlisteneraggregate">Registering module paths with the <code>DefaultListenerAggregate</code></h3>
<p>The following example will search for modules in three different <code>module_paths</code>.
Two are local directories of this application and the third is a system-wide
shared directory.</p>
<pre class="highlight"><code class="language-php">// public/index.php
use Laminas\ModuleManager\Listener;
use Laminas\ModuleManager\ModuleManager;

chdir(dirname(__DIR__));

// Instantiate and configure the default listener aggregate
$listenerOptions = new Listener\ListenerOptions([
    'module_paths' =&gt; [
        './module',
        './vendor',
        '/usr/share/laminasmodules',
    ]
]);
$defaultListeners = new Listener\DefaultListenerAggregate($listenerOptions);

// Instantiate the module manager
$moduleManager = new ModuleManager([
    'Application',
    'FooModule',
    'BarModule',
]);

// Attach the default listener aggregate and load the modules
$moduleManager-&gt;getEventManager()-&gt;attachAggregate($defaultListeners);
$moduleManager-&gt;loadModules();</code></pre>
<blockquote>
<h3 id="module-paths-are-fifo">Module paths are FIFO</h3>
<p>Module paths behave very similar to PHP's <code>include_path</code> and are searched in
the order they are defined. If you have modules with the same name in more
than one registered module path, the module autoloader will return the first
one it finds.</p>
<h3 id="disabling-the-moduleautoloader">Disabling the ModuleAutoloader</h3>
<ul>
<li>Since 2.8.0</li>
</ul>
<p>If you are using Composer to autoload, you may not need to use the
<code>ModuleAutoloader</code>. As such, you can disable it by passing the following
option to the <code>ListenerOptions</code> class:</p>
<pre class="highlight"><code class="language-php">'use_laminas_loader' =&gt; false,</code></pre>
<p>If your project was begun from the <a href="https://github.com/laminas/laminas-mvc-skeleton">laminas-mvc-skeleton</a>,
place the above within the <code>module_listener_options</code> configuration of your
<code>config/application.config.php</code> file:</p>
<pre class="highlight"><code class="language-php">return [
    /* ... */
    'module_listener_options' =&gt; [
        'use_laminas_loader' =&gt; false,
        /* ... */
    ],
    /* ... */
];</code></pre>
</blockquote>
<h2 id="non-standard-explicit-module-paths">Non-Standard / Explicit Module Paths</h2>
<p>Sometimes you may want to specify exactly where a module is instead of having
<code>Laminas\Loader\ModuleAutoloader</code> try to find it in the registered paths.</p>
<h3 id="registering-a-non-standard-explicit-module-path">Registering a Non-Standard / Explicit Module Path</h3>
<p>In this example, the autoloader will first check for <code>MyModule\Module</code> in
<code>/path/to/mymoduledir-v1.2/Module.php</code>. If it's not found, then it will fall
back to searching any other registered module paths.</p>
<pre class="highlight"><code class="language-php">// ./public/index.php
use Laminas\Loader\ModuleAutoloader;
use Laminas\ModuleManager\Listener;
use Laminas\ModuleManager\ModuleManager;

chdir(dirname(__DIR__));

// Instantiate and configure the default listener aggregate
$listenerOptions = new Listener\ListenerOptions([
    'module_paths' =&gt; [
        './module',
        './vendor',
        '/usr/share/laminasmodules',
        'MyModule' =&gt; '/path/to/mymoduledir-v1.2',
    ]
]);
$defaultListeners = new Listener\DefaultListenerAggregate($listenerOptions);

/**
 * Without DefaultListenerAggregate:
 *
 * $moduleAutoloader = new ModuleAutoloader([
 *     './module',
 *     './vendor',
 *     '/usr/share/laminasmodules',
 *     'MyModule' =&gt; '/path/to/mymoduledir-v1.2',
 * ]);
 * $moduleAutoloader-&gt;register();
 *
 */

// Instantiate the module manager
$moduleManager = new ModuleManager([
    'MyModule',
    'FooModule',
    'BarModule',
]);

// Attach the default listener aggregate and load the modules
$moduleManager-&gt;getEventManager()-&gt;attachAggregate($defaultListeners);
$moduleManager-&gt;loadModules();</code></pre>
<p>This same method works if you provide the path to a phar archive.</p>
<h2 id="packaging-modules-with-phar">Packaging Modules with Phar</h2>
<p>If you prefer, you may easily package your module as a
<a href="http://php.net/phar">phar archive</a>. The module autoloader is able to autoload
modules in the following archive formats: .phar, .phar.gz, .phar.bz2, .phar.tar,
.phar.tar.gz, .phar.tar.bz2, .phar.zip, .tar, .tar.gz, .tar.bz2, and .zip.</p>
<p>Package your module by performing a tar the module directory. You can then
replace the <code>MyModule/</code> directory with <code>MyModule.tar</code>, and it should still be
autoloaded without any additional changes!</p>
<blockquote>
<h3 id="avoid-compression">Avoid compression</h3>
<p>If possible, avoid using any type of compression (bz2, gz, zip) on your phar
archives, as it introduces unnecessary CPU overhead to each request.</p>
</blockquote>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../module-class/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../best-practices/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>



                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                <div class="donation-banner">
    <a href="https://getlaminas.org/support/">
        <h2>Donate</h2>
        <p>Support Laminas Developers Directly</p>
        <img src="https://funding.communitybridge.org/assets/cb-f-horizontal-white.svg">
    </a>
</div>

                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-modulemanager</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Introduction</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Reference</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../module-manager/" class="subnavigation__link">The Module Manager</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../module-class/" class="subnavigation__link">The Module Class</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">The Module Autoloader</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../best-practices/" class="subnavigation__link">Best Practices when Creating Modules</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                    
                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-modulemanager/blob/master/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-modulemanager/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2021 <a href="https://getlaminas.org/">Laminas Project</a> a Series of LF Projects, LLC.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '..',
            project  = "mvc",
            siteName = 'laminas-modulemanager';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-modulemanager" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
